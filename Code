# Recovery-League
CPE FINAL PROJECT CODE
//BallHitDetector

using UnityEngine;
public class BallHitDetector : MonoBehaviour
{
    public WristExerciseManager exerciseManager;
    void OnCollisionEnter(Collision collision)
    {
        if (exerciseManager == null)
            return;
        if (!exerciseManager.IsExerciseActive)
            return;
        GameObject other = collision.collider.gameObject;
        bool isGround =
            other.CompareTag("Ground") ||
            other.transform.root.CompareTag("Ground") ||
            (other.transform.parent != null && other.transform.parent.CompareTag("Ground"));
        if (isGround)
            exerciseManager.RespawnBall();
    }
}



//MenuManager

using UnityEngine;
using UnityEngine.UI;
using TMPro;
public class MenuManager : MonoBehaviour
{
    public Button backButton;
    public Button shoulderButton;
    public Button wristButton;
    public TMP_Text outputText;
    public GameObject WristContentPanel;
    public Button backToMenuButton;
    public WristExerciseManager wristExerciseManager;


    void Start()
    {
        backToMenuButton.onClick.AddListener(ReturnToMenu);
        backToMenuButton.gameObject.SetActive(false);
        if (WristContentPanel != null)
            WristContentPanel.SetActive(false);
        outputText.text = "Welcome to Recovery Leauge! \nChoose a Muscle Group:";
        backButton.onClick.AddListener(SelectBackInjury);
        shoulderButton.onClick.AddListener(SelectShoulderInjury);
        wristButton.onClick.AddListener(SelectWristInjury);
    }
    void SelectBackInjury()
    {
        HideAllButtons();
        backToMenuButton.gameObject.SetActive(true);
        if (WristContentPanel != null)
            WristContentPanel.SetActive(false);
        outputText.text = "Coming Soon";
    }
    void SelectShoulderInjury()
    {
        HideAllButtons();
        backToMenuButton.gameObject.SetActive(true);
        if (WristContentPanel != null)
            WristContentPanel.SetActive(false);
        outputText.text = "Coming Soon";
    }
    void SelectWristInjury()
    {
        HideAllButtons();
        backToMenuButton.gameObject.SetActive(true);
        outputText.text = " ";
        if (WristContentPanel != null)
            WristContentPanel.SetActive(true);
    }
    void HideAllButtons()
    {
        backButton.gameObject.SetActive(false);
        shoulderButton.gameObject.SetActive(false);
        wristButton.gameObject.SetActive(false);
    }
    void ShowAllButtons()
    {
        backButton.gameObject.SetActive(true);
        shoulderButton.gameObject.SetActive(true);
        wristButton.gameObject.SetActive(true);
    }
    public void ReturnToMenu()
    {
        if (wristExerciseManager != null)
            wristExerciseManager.StopExercise();
        if (WristContentPanel != null)
            WristContentPanel.SetActive(false);
        ShowAllButtons();
        backToMenuButton.gameObject.SetActive(false);
        outputText.text = "Welcome to Recovery League!";
    }
}




//WristExcersiseManager
using UnityEngine;
using UnityEngine.UI;
using TMPro;
public class WristExerciseManager : MonoBehaviour
{
    public GameObject wristPanel;
    public MenuManager menuManager;
    public GameObject hudRoot;
    public TMP_Text statusText;
    public Button backButton;
    public GameObject courtEnvironment;
    public GameObject ballPrefab;
    public float forwardDistance = 1.0f;
    public float spawnHeightOffset = 1.5f;
    GameObject currentBall;
    bool exerciseActive;
    public bool IsExerciseActive
    {
        get { return exerciseActive; }
    }
    void Start()
    {
        if (courtEnvironment != null)
            courtEnvironment.SetActive(false);
        if (hudRoot != null)
            hudRoot.SetActive(false);
        exerciseActive = false;
        if (backButton != null)
        {
            backButton.gameObject.SetActive(false);
            backButton.onClick.AddListener(OnBackPressed);
        }
    }
    public void StartExercise()
    {
        exerciseActive = true;
        if (wristPanel != null)
            wristPanel.SetActive(false);
        if (courtEnvironment != null)
            courtEnvironment.SetActive(true);
        if (hudRoot != null)
            hudRoot.SetActive(true);
        if (statusText != null)
            statusText.text = "Set the ball with your hand.";
        if (backButton != null)
            backButton.gameObject.SetActive(true);
        SpawnBall();
    }
    void SpawnBall()
    {
        if (!exerciseActive)
            return;
        if (ballPrefab == null)
            return;
        Transform cam = Camera.main != null ? Camera.main.transform : null;
        Vector3 spawnPos;
        Quaternion spawnRot;
        if (cam != null)
        {
            spawnPos = cam.position + cam.forward * forwardDistance;
            spawnPos.y += spawnHeightOffset;
            spawnRot = Quaternion.LookRotation(cam.forward, Vector3.up);
        }
        else
        {
            spawnPos = new Vector3(0f, 2.0f, 0f);
            spawnRot = Quaternion.identity;
        }
        if (currentBall != null)
        {
            Destroy(currentBall);
            currentBall = null;
        }
        currentBall = Instantiate(ballPrefab, spawnPos, spawnRot);
        Rigidbody rb = currentBall.GetComponent<Rigidbody>();
        if (rb != null)
        {
            rb.useGravity = true;
            rb.isKinematic = false;
            rb.linearVelocity = Vector3.zero;
            rb.angularVelocity = Vector3.zero;
        }
        BallHitDetector hit = currentBall.GetComponent<BallHitDetector>();
        if (hit != null)
            hit.exerciseManager = this;
    }
    public void RespawnBall()
    {
        if (!exerciseActive)
            return;
        SpawnBall();
    }
    public void StopExercise()
    {
        exerciseActive = false;
        if (currentBall != null)
        {
            Destroy(currentBall);
            currentBall = null;
        }
        if (courtEnvironment != null)
            courtEnvironment.SetActive(false);
        if (hudRoot != null)
            hudRoot.SetActive(false);
    }
    void OnBackPressed()
    {
        StopExercise();
        if (menuManager != null)
            menuManager.ReturnToMenu();
        else if (wristPanel != null)
            wristPanel.SetActive(true);
    }
}
